<html>
	<head>
		<title> Binary Classification </title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
		<!-- <link href='https://fonts.googleapis.com/css?family=Alegreya Sans SC' rel='stylesheet'>
		<link href='https://fonts.googleapis.com/css?family=Handlee' rel='stylesheet'>
		<link href='https://fonts.googleapis.com/css?family=Caveat Brush' rel='stylesheet'>
		<link href='https://fonts.googleapis.com/css?family=McLaren' rel='stylesheet'>
		 -->
		<!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-MNFFCG66EJ"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-MNFFCG66EJ');
        </script>
		<script type="application/ld+json">
			{
			  "@type": "Projects",
			  "name": "Binary Classification",
			  "author": "Prajwal DSouza",
			  "description": "Classifier inspired by electrostatics, here demonstrated with two classes and two dimensional weighted data."
			  }
		</script>
		  <meta charset="UTF-8">
  		  <meta name="description" content="Classifier inspired by electrostatics, here demonstrated with two classes and two dimensional weighted data.">
		  <meta name="keywords" content="Machine Learning, Classifier, Electrostatics, Prajwal DSouza, Artificial intelligence, Binary Classification, Algorithm, weighted data, classification demo, machine learning demo.">
		  <meta name="author" content="Prajwal DSouza">
		  <meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<link rel="icon" href="../square.png">


	</head>
	<body style='margin:0px;width:100%; height: 100%;'>
		<div id="containAll" style='margin:0px;width:100%; height: 100%;overflow: hidden; font-size: 0;'> 
			<div id="containIntro" style='margin:0px;width:100%; height: 100%;overflow: hidden;background: hsla(300,100%,100%,0); cursor: auto; position: absolute; z-index: 10; opacity: 1;'>
				<div id="TitleText" style='margin:0px;overflow: hidden;text-align: center; font-family: Calibri; letter-spacing: 1vh; font-weight: lighter; font-size: 5vh; transform: translate(-50%,-50%); left: 50%; top: 50%; position: relative; color: hsla(190,100%,10%,1); cursor: pointer;'>
						BINARY CLASSIFICATION
				</div>
				<div id="Titledescription" style='margin:0px;overflow: hidden;text-align: center; font-family: Calibri; font-weight: lighter; font-size: 3vh; transform: translate(-50%,-54%); left: 50%; top: 54%; position: relative; color: hsla(190,100%,10%,1); cursor: pointer; '>
						Demonstration of an classifier inspired by electrostatics. </br>Two classes, Two dimensional weighted data, used to predict the class of the new datapoint.
				</div>
				<div id="informationText" style='margin:0px;overflow: hidden;text-align: center; font-family: Calibri; font-size: 2vh; transform: translate(-50%,-55%); left: 50%; top: 55%; position: relative; color: hsla(40,0%,50%,1); z-index: 10; cursor: pointer;'>
					Press 'd' to display the decision boundary, <br>press 'c' clear it. Else, simply click/tap here.
				</div>
				<div id="WebsiteText" style='margin:0px;overflow: hidden;text-align: center; font-family: Calibri; font-size: 2.5vh; transform: translate(-50%,-70%); left: 50%; top: 70%; position: relative; color: hsla(40,100%,50%,1); z-index: 10;'>
					<a href="https://prajwalsouza.github.io" target="_blank" style="text-decoration: none;  color: hsla(40,0%,50%,0.6); ">
						prajwalsouza.github.io
					</a>
				</div>
			</div>
			<div id="containAbout" style='margin:0px;width:100%; height: 100%;overflow-y: scroll; background: hsla(300,0%,10%,0.9); cursor: auto; position: absolute; z-index: 11; opacity: 0; pointer-events: none;'>
				<div id="about" style='margin:0px;overflow: hidden;text-align: center; font-family: Calibri; font-weight: lighter; font-size: 3vh; left: 5%; top: 15%; width: 90%; position: relative; color: hsla(190,100%,100%,1); '>
						The classifier is demonstrated using a simple binary classification problem. <br> <br> 
						There are two classes of data points, blue and red. We use the classifier to predict which class the new data point belongs to. 
						The classification works in the following manner. <br> Assume that blue class data points are a bunch of negative charges, and red class data points are positive charges. The new data point is like the test charge. We calculate the forces on the test charge. We first calculate the force only due to the positive charges, and then calculate the force due to the negative charges. Based on the magnitude of the two forces, we determine whether it should belong to the blue class or the red class. 
						<br><br> 
						Except that there is a small difference, adding the forces due to each charge isn't a great idea, it doesn't give good classification in some regions where forces due to the same class cancel out. To avoid this cancellation, absolute value of the forces is taken into consideration while adding the force contributions.
						<br><br> 
						Since this approach has charges associated with it, we can use this to our advantage to assign weightage to the data points. If a particular data point is more important than others, it is assigned a higher charge value. 
						<br><br> 
						There are other parameters to play around, the force varies as a inverse square of the distance. This force function can be varied as a parameter. Hence, this approach simply boils down to classifying a point based on it's distance to various classes along with some associations with weights and distance functions. 
				</div>
				<div id="backbutton" style='margin:0px;overflow: hidden;text-align: center; font-family: Calibri; font-weight: lighter; font-size: 2.7vh; top:20%; position: relative; color: hsla(190,100%,50%,1); padding-bottom: 10%; cursor: pointer;'>
						BACK
				</div>
			</div>
			<div id="containData" style='margin:0px;width:100%; height: 100%;overflow: hidden;background: hsla(300,100%,100%,0); cursor: auto; position: absolute; z-index: 2; opacity: 1;'>
				<svg id='dataSvg' height="100%" width="100%" style='position: absolute; z-index: 2'>

				</svg>
			</div>
			
			<div id="containcanvas" style='margin:0px;width:100%; height: 100%;overflow: hidden;background: hsla(300,100%,100%,0); cursor: auto; position: absolute; z-index: 2; opacity: 1;'>
				<canvas id='plotcanvas' height="100%" width="100%" style='position: absolute; z-index: 2; opacity: 0.1;'>
				</canvas>
			</div>
		</div>

		
		<script>

		if (window.innerWidth < window.innerHeight) {
			document.getElementById('TitleText').style.letterSpacing = 0
			document.getElementById('TitleText').style.transform = 'translate(-50%,-34%)';
			document.getElementById('TitleText').style.top = '34%';
			document.getElementById('Titledescription').style.width = '80%'
			document.getElementById('Titledescription').style.transform = 'translate(-50%,-44%)';
			document.getElementById('Titledescription').style.top = '44%';
			document.getElementById('WebsiteText').style.width = '80%'
			document.getElementById('WebsiteText').style.transform = 'translate(-50%,-64%)';
			document.getElementById('WebsiteText').style.top = '64%';
		}

		dataSvg = document.getElementById('dataSvg')

		plotcanvas = document.getElementById('plotcanvas')
		plotcanvas.width = window.innerWidth;
		plotcanvas.height = window.innerHeight;

		blueData = []
		redData = []

		blueweights = []
		redweights = []

		for (i=0; i < 20; i++) {
			var circleElement = document.createElementNS("http://www.w3.org/2000/svg", 'circle');
			px = Math.random()*50
			py = Math.random()*50
			if (Math.random() < 0.2) {
				px = Math.random()*100
				py = Math.random()*100
			}
			circleElement.setAttribute('cx', px + '%');
			circleElement.setAttribute('cy', py + '%');
			blueData.push([px, py])
			w = Math.random()
			blueweights.push(w)
			circleElement.setAttribute('id', 'blue ' + i);
			circleElement.setAttribute('r', 0.4 + (w*0.3) + '%');
			circleElement.setAttribute('vector-effect','non-scaling-stroke');
			circleElement.setAttribute('fill','hsla(10,100%,50%,1)')
			dataSvg.appendChild(circleElement);
			circleElement.style.pointerEvents = 'none'
		}

		for (i=0; i < 20; i++) {
			var circleElement = document.createElementNS("http://www.w3.org/2000/svg", 'circle');
			px = 30 + Math.random()*80
			py = 50 + Math.random()*50
			if (Math.random() < 0.2) {
				px = Math.random()*100
				py = Math.random()*100
			}
			circleElement.setAttribute('cx', px + '%');
			circleElement.setAttribute('cy', py + '%');
			redData.push([px, py])
			w = Math.random()
			redweights.push(w)
			circleElement.setAttribute('id', 'red ' + i);
			circleElement.setAttribute('r', 0.4 + (w*0.3) + '%');
			circleElement.setAttribute('vector-effect','non-scaling-stroke');
			circleElement.setAttribute('fill','hsla(190,100%,50%,1)')
			dataSvg.appendChild(circleElement);
			circleElement.style.pointerEvents = 'none'
		}

		colorchoices = ['rgba(255, 132, 10, 0.1)','rgba(255, 222, 10, 0.1)']
		

		function fillSpace() {
			
			xpoints = 200
			ypoints = 200

			for (i=0; i < xpoints; i++) {
				for (j=0; j < ypoints; j++) {
					var rectElement = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
					rectElement.setAttribute('height',100/xpoints + "%");
					rectElement.setAttribute('width', 100/ypoints +  '%');
					rectElement.setAttribute('id', 'rect ' + i + ',' + j);
					rectElement.setAttribute('x', i + '%');
					rectElement.setAttribute('y', j + '%');
					rectElement.style.opacity = 1;
					rectElement.style.fill = colorchoices[parseInt(Math.random()*(colorchoices.length))];
				}
			}
		}


		function fillSpaceCanvas() {

			context = plotcanvas.getContext("2d");
			
			xpoints = 200
			ypoints = 200

			var rect = plotcanvas.getBoundingClientRect();

			for (i=0; i < xpoints; i++) {
				for (j=0; j < ypoints; j++) {
					pred = predict([i*100/xpoints, j*100/ypoints], blueData, redData, blueweights, redweights)
					posx = (i*rect.width)/xpoints
					posy = (j*rect.height)/ypoints
					if (pred == 1) {
						context.fillStyle = 'hsla(10,100%,50%,1)'
						context.beginPath();
						context.strokeStyle = 'rgba(255,255,255,0)';
						context.rect(posx, posy, (rect.width/xpoints), (rect.height/ypoints) + 1);
						context.fill();
					}
					else {
						context.fillStyle = 'hsla(190,100%,50%,1)'
						context.beginPath();
						context.strokeStyle = 'rgba(255,255,255,0)';
						context.rect(posx, posy, rect.width/xpoints, (rect.height/ypoints) + 1);
						context.fill();
					}

				}
			}
		}

		var circleElement = document.createElementNS("http://www.w3.org/2000/svg", 'circle');
		circleElement.setAttribute('cx', Math.random()*100 + '%');
		circleElement.setAttribute('cy', Math.random()*100 + '%');
		circleElement.setAttribute('id', 'newpoint');
		circleElement.setAttribute('r', '0.8%');
		circleElement.setAttribute('stroke-width', '0.3%');
		circleElement.setAttribute('stroke', 'hsla(270,0%,50%,0.2)');
		circleElement.setAttribute('vector-effect','non-scaling-stroke');
		circleElement.setAttribute('fill','hsla(270,100%,50%,0.2)')
		dataSvg.appendChild(circleElement);
		circleElement.style.pointerEvents = 'none'
		circleElement.style.opacity = 1


		function forceFactor(newp, weight, pointdata) {
			pos = pointdata
			pOI = newp

			posXv = (pOI[0] - pos[0])
			posYv = (pOI[1] - pos[1])

			distance = Math.sqrt((posXv*posXv) + (posYv*posYv))
			force = (weight*1)/(distance*distance)

			xval = Math.abs(force*posXv/distance)
			yval = Math.abs(force*posYv/distance)

			return [xval, yval]
		}

		function predict(datapoint, class1data, class2data, class1W, class2W) {

			class1x = 0
			class1y = 0
			for (a1 = 0; a1 < class1data.length; a1++) {
				value = forceFactor(datapoint, class1W[a1], class1data[a1])
				class1x = class1x + value[0]
				class1y = class1y + value[1]
			}

			class1value = Math.sqrt((class1x*class1x) + (class1y*class1y))

			class2x = 0
			class2y = 0
			for (a1 = 0; a1 < class2data.length; a1++) {
				value = forceFactor(datapoint, class2W[a1], class2data[a1])
				class2x = class2x + value[0]
				class2y = class2y + value[1]
			}

			class2value = Math.sqrt((class2x*class2x) + (class2y*class2y))


			if (class1value >= class2value) {
				return 1
			}
			else {
				return 0
			}
		}

		function predictPoint(event) {
			context = plotcanvas.getContext("2d");
	
			var rect = plotcanvas.getBoundingClientRect();
			posx = event.clientX - rect.left;
			posy = event.clientY - rect.top;

			posxP = posx*100/rect.width;
			posyP = posy*100/rect.height;

			pred = predict([posxP, posyP], blueData, redData, blueweights, redweights)

			circleElement = document.getElementById('newpoint')
			circleElement.setAttribute('cx', posxP + '%');
			circleElement.setAttribute('cy', posyP + '%');
			if (pred == 1) {
				circleElement.setAttribute('fill','hsla(10,100%,50%,0.7)')
				context.fillStyle = 'hsla(10,100%,50%,1)'
				context.beginPath();
				context.strokeStyle = 'rgba(255,255,255,0)';
				context.arc(posx, posy, 4, 0, 2 * Math.PI);
				context.fill();
			}
			else {
				circleElement.setAttribute('fill','hsla(190,100%,50%,0.7)')
				context.fillStyle = 'hsla(190,100%,50%,1)'
				context.beginPath();
				context.strokeStyle = 'rgba(255,255,255,0)';
				context.arc(posx, posy, 4, 0, 2 * Math.PI);
				context.fill();
			}
		}

		function handlekeys(event) {
			if (event.keyCode == 100) {
				fillSpaceCanvas()
			}
			if (event.keyCode == 99) {
				context = plotcanvas.getContext("2d");
				context.clearRect(0, 0, context.canvas.width, context.canvas.height);
			}
		}

		showdecisionBoundary = false

		function handleDecisionDisplay(event) {
			if(showdecisionBoundary) {
				showdecisionBoundary = false
				context = plotcanvas.getContext("2d");
				context.clearRect(0, 0, context.canvas.width, context.canvas.height);
			}
			else {
				showdecisionBoundary = true
				fillSpaceCanvas()
			}
		}

		document.getElementById('containAll').addEventListener('mousemove', predictPoint);

		window.addEventListener('keypress', handlekeys)

		function aboutTheClassifier(event) {
			document.getElementById('containAbout').style.opacity = 1
			document.getElementById('containAbout').style.pointerEvents = 'auto';
		}

		function hideaboutTheClassifier(event) {
			document.getElementById('containAbout').style.opacity = 0
			document.getElementById('containAbout').style.pointerEvents = 'none';
		}

		document.getElementById('Titledescription').addEventListener('click', aboutTheClassifier)
		document.getElementById('TitleText').addEventListener('click', aboutTheClassifier)
		document.getElementById('informationText').addEventListener('click', handleDecisionDisplay)
		document.getElementById('backbutton').addEventListener('click', hideaboutTheClassifier)



		</script>

		<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-database.js"></script>

		<script type="text/javascript">
			function scrollcalc(event) {
				var d = new Date();
				scrldata.push([d.getTime(),document.body.scrollTop])
			}
			window.addEventListener("scroll", scrollcalc);
		</script>

		<script>

			var config = {
				apiKey: "AIzaSyArJkAsZBO3mYesyf74qT4HGbz2eW7rFkg",
				authDomain: "website-prajwal.firebaseapp.com",
				databaseURL: "https://website-prajwal.firebaseio.com",
				storageBucket: "website-prajwal.appspot.com"
			};
			firebase.initializeApp(config);

			var rootRef = firebase.database().ref()
			var storesRef = rootRef.child('scrollData/');
			var newStoreRef = storesRef.push();

			var docheight = Math.max( document.body.scrollHeight, document.body.offsetHeight, 
				       document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight );


			window.onbeforeunload = closingCode;
			function closingCode(){
				newStoreRef.set({
					'page': "Binary-Classification",
					'pageheight' : docheight,
					'navigatordata' : [navigator.platform, navigator.language, navigator.appVersion, navigator.vendor, navigator.product, screen.width, screen.height, screen.colorDepth, screen.pixelDepth, history.length],
					"scrolldata": scrldata
				});
			}

			scrldata = []



		</script>



	</body>
<html>
